<div class="contain">
    <h1>Firebase Storage Demo</h1>

    <p>
      Learn how to build an
      <a href="https://angularfirebase.com/lessons/firebase-storage-with-angularfire-dropzone-file-uploader/">AngularFirebase dropzone uploader</a>
    </p>

    <hr>

    <div class="dropzone" dropZone (hovered)="toggleHover($event)" (dropped)="startUpload($event)" [class.hovering]="isHovering">

      <h3>AngularFire Drop Zone</h3>
      <p>Drag and Drop a File</p>
      <div class="file">
        <label class="file-label">


          <input class="file-input" type="file" (change)="startUpload($event.target.files)">

          <span class="file-cta">
            <span class="file-icon">
              <i class="fa fa-upload"></i>
            </span>
            <span class="file-label">
              or choose a fileâ€¦
            </span>
          </span>
        </label>
      </div>
    </div>




    <div *ngIf="percentage | async as pct">

      <progress class="progress is-info" [value]="pct" max="100">
      </progress>

      {{ pct | number }}%

    </div>






    <div *ngIf="(snapshot | async) as snap">
      {{ snap.bytesTransferred | fileSize }} of {{ snap.totalBytes | fileSize }}


      <div *ngIf="downloadURL | async as url">
        <h3>Results!</h3>
        <img [src]="url">
        <br>
        <a [href]="url" target="_blank" rel="noopener">Download Me!</a>
      </div>
      <hr>






      <button (click)="task.pause()" class="button is-warning" [disabled]="!isActive(snap)">Pause</button>
      <button (click)="task.cancel()" class="button is-danger" [disabled]="!isActive(snap)">Cancel</button>
      <button (click)="task.resume()" class="button is-info" [disabled]="!(snap?.state === 'paused')">Resume</button>


    </div>
  <div class="card">
      <div class="card-header">
          Create Event
        </div>
    <div class="card-body">
      <form [formGroup]="angForm" novalidate>
        <div class="form-group">
          <label class="col-md-4">Event Name</label>
          <input
            type="text"
            class="form-control"
            formControlName="event_name"
            #event_name
          />
        </div>
        <div
          *ngIf="
            angForm.controls['event_name'].invalid &&
            (angForm.controls['event_name'].dirty ||
              angForm.controls['event_name'].touched)
          "
          class="alert alert-danger"
        >
          <div *ngIf="angForm.controls['event_name'].errors.required">
            Event Name is required.
          </div>
        </div>
        <div class="form-group">
          <label class="col-md-4">Event Description </label>
          <input
            type="text"
            class="form-control"
            formControlName="event_desc"
            #event_desc
          />
        </div>
        <div
          *ngIf="
            angForm.controls['event_desc'].invalid &&
            (angForm.controls['event_desc'].dirty ||
              angForm.controls['event_desc'].touched)
          "
          class="alert alert-danger"
        >
          <div *ngIf="angForm.controls['event_desc'].errors.required">
            Event Description is required.
          </div>
        </div>
        <div class="form-group">
          <label class="col-md-4">Event Other Description </label>
          <input
            type="text"
            class="form-control"
            formControlName="event_desc_other"
            #event_desc_other
          />
        </div>
        <div
          *ngIf="
            angForm.controls['event_desc_other'].invalid &&
            (angForm.controls['event_desc_other'].dirty ||
              angForm.controls['event_desc_other'].touched)
          "
          class="alert alert-danger"
        >
          <div *ngIf="angForm.controls['event_desc_other'].errors.required">
            Event Other Description is required.
          </div>
        </div>
        <div class="form-group">
          <label class="col-md-4">Event GST Number </label>
          <input
            type="text"
            class="form-control"
            formControlName="event_gst_number"
            #event_gst_number
          />
        </div>
        <div
          *ngIf="
            angForm.controls['event_gst_number'].invalid &&
            (angForm.controls['event_gst_number'].dirty ||
              angForm.controls['event_gst_number'].touched)
          "
          class="alert alert-danger"
        >
          <div *ngIf="angForm.controls['event_gst_number'].errors.required">
            Event GST Number is required.
          </div>
        </div>
        <div class="form-group">
          <label class="col-md-4">Event Date </label>
          <input
            type="date"
            class="form-control"
            formControlName="event_gst_date"
            #event_gst_date
          />
        </div>
        <div
          *ngIf="
            angForm.controls['event_gst_date'].invalid &&
            (angForm.controls['event_gst_date'].dirty ||
              angForm.controls['event_gst_date'].touched)
          "
          class="alert alert-danger"
        >
          <div *ngIf="angForm.controls['event_gst_date'].errors.required">
            Event date is required.
          </div>
        </div>
        <div class="form-group">
          <button
            (click)="
              addEvent(
                event_name.value,
                event_desc.value,
                event_desc_other.value,
                event_gst_number.value,
                event_gst_date.value
              )
            "
            [disabled]="angForm.pristine || angForm.invalid"
            class="btn btn-primary"
          >
            Add Event
          </button>
          <button
          routerLink="/admin"
            class="btn space btn-warning"
          >
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
